#define gLED 8
#define rLED 13
#define ButtonPin 16

bool Switch = false;
bool ButtonState = false;
uint32_t PrevMillis = 0;
byte ButtonReading;
uint32_t SerialMillis = 0;

void setup () {
  Serial.begin(115200);
  pinMode(gLED, OUTPUT);
  pinMode(rLED, OUTPUT);
  pinMode(ButtonPin, INPUT_PULLUP);
}

void Debounce() {
  ButtonReading = digitalRead(ButtonPin);

  if (ButtonState == false) {
    if (ButtonReading == ButtonState) {
      PrevMillis = millis();
    }
    if (millis() - PrevMillis > 100) {
      ButtonState = true;
    }
  }

  if (ButtonState == true) {
    if (ButtonReading == ButtonState) {
      PrevMillis = millis();
    }
    if (millis() - PrevMillis > 100) {
      Switch = !Switch;
      ButtonState = false;
    }
  }
}

void loop () {

  Debounce();

  if (millis() - SerialMillis > 500) {
    Serial.print("Switch state is ");
    Serial.println(Switch);
    SerialMillis = millis();
  }

  digitalWrite(gLED, Switch);
  digitalWrite(rLED, ButtonState);
}
